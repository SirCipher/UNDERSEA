syntax = "proto3";
option java_package = "com.type2labs.undersea.prospect";
option java_outer_classname = "RaftProtos";
option java_generate_equals_and_hash = true;
package proto;
import "google/protobuf/any.proto";

service RaftProtocolService {
    rpc GetStatus (AcquireStatusRequest) returns (stream AcquireStatusResponse) {
    }

    rpc AppendEntry (AppendEntryRequest) returns (AppendEntryResponse) {

    }

    rpc RequestVote (VoteRequest) returns (VoteResponse) {

    }

    rpc SayHello(HelloRequest) returns (HelloResponse) {

    }

}

message HelloRequest {
    string name = 1;
}

message HelloResponse {
    string name = 1;
}

message RaftPeerProto {
    uint32 port = 1;
    string host = 2;
    string name = 3;
}

message AcquireStatusRequest {
    RaftPeerProto client = 1;
    string status = 2;
}

message AcquireStatusResponse {
    RaftPeerProto client = 1;
    repeated Tuple status = 2;
}

message Tuple {
    string fieldType = 1;
    string value = 2;
}

message AppendEntryRequest {
    RaftPeerProto client = 1;
    LogEntryProto logEntry = 2;
    uint32 term = 3;
    uint32 prevLogIndex = 4;
}

message AppendEntryResponse {
    RaftPeerProto client = 1;
}

message LogEntryProto {
    string data = 1;
}

message VoteRequest {
    RaftPeerProto client = 1;
    uint32 term = 2;
}

message VoteResponse {
    RaftPeerProto client = 1;
    RaftPeerProto nominee = 2;
}


